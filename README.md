# schedule-setter

投信売却日チェッカー。指定した年月における日本の平日（祝日除く）を走査し、証券会社ごとの推奨売却日を自動計算します。`index.html` と `app.js` を静的に配信するだけで動作します。

## 主な機能
- `input[type="month"]` に任意の年月を入力すると、当月の平日リストを生成。
- 2番目/3番目の平日と、3・8・12・26日以降で2番目の平日を抽出して画面表示。
- holiday-jp モジュールを CDN (`esm.sh`) から動的 import し、祝日（振替休日・国民の休日を含む）を除外。
- 「カレンダーに追加」ボタンから macOS Calendar 用 AppleScript を開き、9:00-12:00 のイベントを6件一括登録。
- 祝日セットは年単位でキャッシュし、同じ年の再計算を高速化。

## 使い方
1. 任意の HTTP サーバーでリポジトリを配信するか、`index.html` をブラウザーで直接開きます。
2. 画面の年月入力に希望の月を設定し「計算する」を押すと、結果カードに日付が並びます。
3. macOS の場合は「カレンダーに追加」を押すと Script Editor が開き、内容を実行するとデフォルトカレンダーに予定が作成されます。
4. holiday-jp の取得に失敗した場合はエラーメッセージが表示されるので、ネットワーク接続を確認して再読み込みしてください。

## 技術構成
| ファイル | 役割 |
| --- | --- |
| `index.html` | UI の骨格。フォーム (`#month-form`) と結果表示セクション (`#result`) を定義。|
| `styles.css` | ライト/ダーク両対応のスタイル。カードやボタンのレイアウトを定義。|
| `app.js` | ビジネスロジック。平日計算、祝日キャッシュ、結果描画、AppleScript 生成を担当。|

## 開発メモ
- holiday-jp を別の供給元に切り替える場合は `getJapaneseHolidaySet` を置き換えるだけで良い構造になっています。
- 日本国外のタイムゾーンで実行すると平日判定が実行環境基準になるため、サーバーサイドで JST 固定にする場合はロジックの分離が必要です。
- macOS 以外では `applescript://` スキームが開けないため、代替として `.ics` 生成や `navigator.share` を追加する余地があります。
- ブラウザの DevTools コンソールから `collectBusinessDays(year, month)` を呼ぶと、日付配列を直接検証できます。

## ライセンス
未定義。プロジェクト方針に合わせて LICENSE を追加してください。
